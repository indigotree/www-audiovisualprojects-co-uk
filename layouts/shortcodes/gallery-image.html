{{ $Scope := . }}
{{ if .Get "image" }}

{{ $image := (.Get "image") }}
{{ $alt :=  .Get "alt" | default "Gallery Image" }}
    <div class="gallery__media">

        {{ with .Site.GetPage "page" "uploads/index.md" }}

            {{ $match := .Resources.GetMatch (strings.TrimPrefix "/uploads/" $image) }}
            
            {{ $full := $match.Fill "1920x1080 q80" }}

            <a data-fancybox="{{ with .Parent }}{{ .Get "id" }}{{ end }}" href="{{ $full.RelPermalink }}" data-turbolinks="false">
                {{ partial "image/lazy.html" (dict "Src" $image "Alt" $alt "Size" "1024x1024 q80" "Scope" $Scope) }}
            </a>

        {{ end }}
    </div>
{{ end }}